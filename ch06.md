# บทที่ 6 

1. UI with React Native Paper 
   - https://docs.expo.io/guides/userinterface/
   - https://callstack.github.io/react-native-paper/index.html
   - https://callstack.github.io/react-native-paper/bottom-navigation.html
   - Icons https://materialdesignicons.com/
   
2. AsyncStorage https://react-native-async-storage.github.io/async-storage/docs/install/

3. การอ่านเขียน ข้อมูลใน firebase 
   - https://docs.expo.io/guides/using-firebase/
   - ตัวอย่าง https://snack.expo.io/@twachi/studentfire

## ตัวอย่าง

```typescript

import * as React from 'react';
import { StyleSheet } from 'react-native';

import EditScreenInfo from '../components/EditScreenInfo';
import { Text, View } from '../components/Themed';
import { Button, TextInput } from 'react-native-paper';
import AsyncStorage from '@react-native-async-storage/async-storage';

async function load( setId:any, setFname:any, setLname:any ){
  const id    = await AsyncStorage.getItem('id');
  const fname = await AsyncStorage.getItem('fname');
  const lname = await AsyncStorage.getItem('lname');
  if(id !== null) { 
    setId(id); 
  }
  if(fname !== null) { 
    setFname(fname); 
  }
  if(lname !== null) { 
    setLname(lname); 
  }
}

export default function TabTwoScreen() {
  const [id   , setId]    = React.useState('');
  const [fname, setFname] = React.useState('');
  const [lname, setLname] = React.useState('');

  if(id==''){
    load(setId,setFname,setLname);
  }

  return (
    <View style={styles.container}>      
     <TextInput mode="outlined"
      label="รหัสนักศึกษา"
      value={id}
      onChangeText={text => setId(text)}
      style={styles.text}
     />
     <TextInput 
      label="ชื่อ"  mode="outlined"
      value={fname}
      onChangeText={text => setFname(text)}
      style={styles.text}
     />
     <TextInput
      label="นามสกุล"  mode="outlined"
      value={lname}
      onChangeText={text => setLname(text)}
      style={styles.text}
     />
      <Button 
        icon="content-save" 
        mode="contained" 
        onPress={() => {
          AsyncStorage.setItem('id', id);
          AsyncStorage.setItem('fname', fname);
          AsyncStorage.setItem('lname', lname);
        }
        }> บันทึก </Button>    
     
    </View>    
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    //alignItems: 'center',
    justifyContent: 'flex-start',
    padding: 5,
  },
  text :{
    marginTop: 10,
    //flex: 1,
  },
  title: {
    fontSize: 20,
    fontWeight: 'bold',
  },
  separator: {
    marginVertical: 30,
    height: 1,
    width: '80%',
  },
});


```

#ตัวอย่าง Firebase

```typescript
import * as React from 'react';
import { StyleSheet, FlatList } from 'react-native';

import EditScreenInfo from '../components/EditScreenInfo';
import { Text, View } from '../components/Themed';
import { Button, TextInput } from 'react-native-paper';
import * as firebase from 'firebase';

function save(id:string, name:string){
  firebase.database().ref('city/'+id).set(name);
}
function load(setCities:any){
  firebase.database().ref('city').on('value', (snapshot:any) => {
    var list=[];
    var data = snapshot.val();
    var no=0;
    for(var id in data){
      var txt = data[id]; 
      var city={id:id, name:txt};
      list.push(city);
    }
    setCities(list);
    console.log(list);
 });
}

export default function TabOneScreen() {
  const [cities, setCities]    = React.useState([]);
  const [cid,   setId]    = React.useState("");
  const [cname, setName]    = React.useState("");

  const [inited, setInited]    = React.useState(false);
  if(!inited){
     load(setCities);
     setInited(true);
  }

  return (
    <View style={styles.container}>
      <Text style={styles.title}>รายชื่อเมือง</Text>
      <TextInput
      label="รหัส"  mode="outlined"
      value={cid}
      onChangeText={text => setId(text)}
     />
      <TextInput
      label="ชื่อเมือง"  mode="outlined"
      value={cname}
      onChangeText={text => setName(text)}
     />
      <Button 
        icon="content-save" 
        mode="contained" 
        onPress={() => { save(cid,cname); setId(""); setName("");  } }> Add </Button>    
      <FlatList
        data={cities}
        renderItem={({item}) =><Text style={styles.text}>
        {item.id} 
        {item.name} 
        </Text>
       }
      />

    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    margin:10
  },
  title: {
    fontSize: 20,
    fontWeight: 'bold',
  },
  separator: {
    marginVertical: 30,
    height: 1,
    width: '80%',
  },
});

```
